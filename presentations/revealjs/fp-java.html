<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Functional Programming in Java - Martin Snyder</title>

    <!--
        TODO:
        * Rigor over policy
        * Narrow the scope of what's possible in any specific context

        Future of Java
          Switch Expressions - https://openjdk.java.net/jeps/325 https://openjdk.java.net/jeps/354
          Pattern Matching - https://openjdk.java.net/jeps/305 (test, conditional extraction, binding)
          Pattern Matching for switch - https://openjdk.java.net/jeps/8213076
          Records (product type) - https://openjdk.java.net/jeps/8222777
          Sealed Types (sum type) - https://openjdk.java.net/jeps/8227043

          https://www.youtube.com/watch?v=BL6ba2dtprw
          Java Futures, Early 2019 Edition - Brian Goetz

        More Implications
          Types
            Algebraic Data Types (Intersection / Union types)
              Pattern Matching

        More Tweets
          https://twitter.com/mathiasverraes/status/1153615691397943297?s=03
          https://twitter.com/alexelcu/status/1161930030412423168?s=03
    -->

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/black.css" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css" />

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi)
        ? "css/print/pdf.css"
        : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Functional Programming in Java</h1>
          <h3>Past, Present, and Future</h3>
          <p>
            <small>
              <a href="https://martinsnyder.net">Martin Snyder</a> /
              <a href="https://twitter.com/MartinSnyder">@MartinSnyder</a>
            </small>
          </p>
        </section>

        <section>
          <section>
            <h3>Example Functions</h3>
            \[\begin{aligned} x &amp; = f(g) \\ y &amp; = f(h) \\ z &amp; = g(y)
            \\ \omega &amp; = sin(\theta) \\ state' &amp; = f(state, input)
            \end{aligned} \]
          </section>

          <section>
            <h3>Properties of Mathematical Functions</h3>
            <ul>
              <li>Behavior Dependant Solely on Parameters</li>
              <li>Consistent Evaluation</li>
              <li>Explicit Dependencies</li>
              <li>Factorable & Composable</li>
            </ul>
          </section>

          <section>
            <h3>Implications of Functions</h3>
            <ul>
              <li>
                Immutability
                <ul>
                  <li>
                    Persistent Data Structures
                    <ul>
                      <li>
                        Recursion
                        <ul>
                          <li>Higher Order Functions</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Expressions
                    <ul>
                      <li>
                        Variables
                        <ul>
                          <li>
                            Referential Transparency
                            <ul>
                              <li>Lazy Evaluation</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h3>Definition - Immutable</h3>
            <blockquote
              cite="https://www.merriam-webster.com/dictionary/immutable"
            >
              not capable of or susceptible to change
            </blockquote>
            -
            <a href="https://www.merriam-webster.com/dictionary/immutable"
              >merriam-webster.com</a
            >
          </section>

          <section>
            <h3>Benefits of Immutability</h3>
            <ul>
              <li>No unexpected manipulations</li>
              <li>Sharing instead of copying</li>
              <li>Trivial caching</li>
              <li>Multithreaded Accessible</li>
              <li>Reusable object instances</li>
            </ul>
          </section>

          <section>
            <h3>Immutability in Java</h3>
            <ul>
              <li>Strings</li>
              <li>Numerics</li>
              <li>Guava Collection</li>
              <li>Java 8 - Streams</li>
              <li>Java 9 - Collection factory methods</li>
            </ul>
          </section>

          <section>
            <h3>Java Reusable Object Instances</h3>
            Source
            <pre><code data-trim data-noescape data-line-numbers>
              String one = "one";
              String two = "two";
              String compiledString = "onetwo";
              String runtimeString = one + two;
              String optimizedString = runtimeString.intern();</code></pre>

            Output
            <pre><code data-trim data-noescape data-line-numbers>
              compiledString and runtimeString are equal but not the same
              compiledString and optimizedString instances are the same</code></pre>
          </section>

          <section>
            <h3>Java Immutable Transformations</h3>
            Source
            <pre><code data-trim data-noescape data-line-numbers>
              Integer[] intArray = { 1, 2, 3, 4, 5 };
              int magicNumber = Arrays
                .stream(intArray)
                .map(i -&gt; i * 2)
                .filter(i -&gt; i &gt; 5)
                .reduce((acc, i) -&gt; acc + i)
                .get();

              System.out.println("The magic number is " + magicNumber);</code></pre>

            Output
            <pre><code data-trim data-noescape data-line-numbers>
              The magic number is 24</code></pre>
          </section>
        </section>

        <section>
          <h3>Java Immutable Collections</h3>
        </section>

        <section>
          <section>
            <h3>The Perils of Mutability</h3>
            <blockquote class="twitter-tweet" data-lang="en">
              <p lang="en" dir="ltr">
                If you don&#39;t think managing state is tricky, consider the
                fact that 80% of all problems in all complex systems are fixed
                by rebooting.
              </p>
              &mdash; stuarthalloway (@stuarthalloway)
              <a
                href="https://twitter.com/stuarthalloway/status/1134806008528809985?ref_src=twsrc%5Etfw"
                >June 1, 2019</a
              >
            </blockquote>
          </section>

          <section>
            <h3>The Perils of Mutability</h3>
            <pre><code data-trim data-noescape data-line-numbers>
                public class Person {
                  public String givenName;
                  public String familyName;
  
                  public boolean equals(Object o) { ... }
                  public int hashCode() { return Objects.hash(givenName, familyName); }
                  public String toString() { return givenName + " " + familyName; }
                }</code></pre>
          </section>

          <section>
            <h3>The Perils of Mutability</h3>
            Source
            <pre><code data-trim data-noescape data-line-numbers>
                Person martin = new Person("Martin", "S");
                Set&lt;Person&gt; people = new HashSet&lt;&gt;();
        
                people.add(martin);
                martin.givenName = "Marty";
                people.add(martin);
                Set&lt;Person&gt; peopleCopy = new HashSet&lt;&gt;(people);</code></pre>
            Output
            <pre><code data-trim data-noescape data-line-numbers>
                people                           : [Marty S, Marty S]
                people.contains(... "Martin" ...): false
                people.size()                    : 2
                peopleCopy.size()                : 1</code></pre>
          </section>
        </section>

        <section>
          <section>
            <h3>Definition - Persistent data structure</h3>
            <blockquote
              cite="https://en.wikipedia.org/wiki/Persistent_data_structure"
            >
              In computing, a persistent data structure is a data structure that
              always preserves the previous version of itself when it is
              modified. Such data structures are effectively immutable...
            </blockquote>
            -
            <a href="https://en.wikipedia.org/wiki/Persistent_data_structure"
              >wikipedia.org</a
            >
          </section>

          <section>
            <h3>Persistent Data Structure</h3>
            <pre><code data-trim data-noescape data-line-numbers>
              public interface List&lt;T&gt; {
                T head();
                List&lt;T&gt; tail();
                boolean isEmpty();
              }</code></pre>
          </section>

          <section>
            <h3>Persistent Data Structure</h3>
            <pre><code data-trim data-noescape data-line-numbers>
              class Empty&lt;T&gt; implements List&lt;T&gt; {
                public T head() { throw new RuntimeException(".head() invoked on empty list"); }
                public List&lt;T&gt; tail() { throw new RuntimeException(".tail() invoked on empty list"); }
                public boolean isEmpty() { return true; }
              }

              class Node&lt;T&gt; implements List&lt;T&gt; {
                private final T item;
                private final List&lt;T&gt; next;
        
                public T head() { return item; }
                public List&lt;T&gt; tail() { return next; }
                public boolean isEmpty() { return false; }

                Node(T item, List&lt;T&gt; next) { ... }
              }</code></pre>
          </section>
        </section>

        <section>
          <section>
            <h3>Definition - Recursion</h3>
            <blockquote cite="https://en.wikipedia.org/wiki/Recursion">
              Recursion (adjective: recursive) occurs when a thing is defined in
              terms of itself or of its type ... The most common application of
              recursion is in mathematics and computer science, where a function
              being defined is applied within its own definition.
            </blockquote>
            -
            <a href="https://en.wikipedia.org/wiki/Recursion">wikipedia.org</a>
          </section>

          <section>
            <h3>Recursive Algorithm</h3>
            <pre><code data-trim data-noescape data-line-numbers>
              static &lt;T&gt; int length(List&lt;T&gt; l) {
                if (l.isEmpty()) {
                  return 0;
                }
                else {
                  return 1 + length(l.tail());
                }
              }</code></pre>
          </section>
        </section>

        <section>
          <section>
            <h3>Definition - Higher-order function</h3>
            <blockquote
              cite="https://en.wikipedia.org/wiki/Higher-order_function"
            >
              A higher-order function is a function that does at least one of
              the following:

              <ul>
                <li>
                  takes one or more functions as arguments (i.e. procedural
                  parameters)
                </li>
                <li>returns a function as its result.</li>
              </ul>
            </blockquote>
            -
            <a href="https://en.wikipedia.org/wiki/Higher-order_function"
              >wikipedia.org</a
            >
          </section>

          <section>
            <h3>Generalized Recursion (Fold)</h3>
            <pre><code data-trim data-noescape data-line-numbers>
              interface Combiner&lt;R, T&gt; {
                R combine(R r, T t);
              }
          
              static &lt;R, T&gt; R fold(R acc, List&lt;T&gt; l, Combiner&lt;R, T&gt; combiner) {
                if (l.isEmpty()) {
                  return acc;
                }
                else {
                  R nextAcc = combiner.combine(acc, l.head());
                  return fold(nextAcc, l.tail(), combiner);
                }
              }</code></pre>
          </section>

          <section>
            <h3>Recursion using Fold</h3>
            <pre><code data-trim data-noescape data-line-numbers>
              static &lt;T&gt; int length(List&lt;T&gt; l) {
                return fold(0, l, (acc, next) -&gt; acc + 1);
              }

              static &lt;T&gt; String listToString(List&lt;T&gt; l) {
                return fold("", l, (acc, next) -&gt; acc + next.toString());
              }

              static int sum(List&lt;Integer&gt; l) {
                return fold(0, l, (acc, next) -&gt; acc + next);
              }</code></pre>
          </section>
        </section>

        <section>
          <h1>Thank You!</h1>
          <p>
            <small>
              <a href="https://martinsnyder.net">Martin Snyder</a> /
              <a href="https://twitter.com/MartinSnyder">@MartinSnyder</a>
            </small>
          </p>
        </section>
      </div>
    </div>

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        history: true,
        dependencies: [
          { src: "plugin/markdown/marked.js" },
          { src: "plugin/markdown/markdown.js" },
          { src: "plugin/notes/notes.js", async: true },
          { src: "plugin/highlight/highlight.js", async: true },
          { src: "plugin/math/math.js", async: true }
        ]
      });
    </script>

    // Twitter script to format Tweets
    <script
      src="https://platform.twitter.com/widgets.js"
      charset="utf-8"
    ></script>
  </body>
</html>
